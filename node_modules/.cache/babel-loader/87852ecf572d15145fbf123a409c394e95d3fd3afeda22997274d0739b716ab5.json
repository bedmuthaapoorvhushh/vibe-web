{"ast":null,"code":"import React from'react';import Papa from'papaparse';import supabase from'./supabaseClient';import Card from'./Card';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FileUpload(_ref){let{setCards,user}=_ref;const handleFileUpload=async event=>{const file=event.target.files[0];const reader=new FileReader();reader.onload=async e=>{console.log('File loaded successfully.');const text=e.target.result;console.log('File content:',text);const{data,errors}=Papa.parse(text,{header:true,skipEmptyLines:true});console.log('Parsed data:',data);if(errors.length>0){console.error('CSV parsing error:',errors);return;}console.log(user);// Add the email field to each record\nconst dataWithEmail=data.map(record=>({...record,email:user}));console.log('Data with email:',dataWithEmail);// Uploading to Supabase\nconst{error}=await supabase.from('user_data').insert(dataWithEmail);if(error){console.error('Error inserting data:',error);}else{// Update state with new cards if needed\nconsole.log('Data inserted successfully:',dataWithEmail);setCards(prevCards=>[...prevCards,...dataWithEmail.map(obj=>/*#__PURE__*/_jsx(Card,{obj:obj},obj.id))]);}};reader.readAsText(file);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",id:\"csvFileInput\",onChange:handleFileUpload,style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"csvFileInput\",className:\"labelStyle\",children:\" Import CSV File \"})]});}","map":{"version":3,"names":["React","Papa","supabase","Card","jsx","_jsx","jsxs","_jsxs","FileUpload","_ref","setCards","user","handleFileUpload","event","file","target","files","reader","FileReader","onload","e","console","log","text","result","data","errors","parse","header","skipEmptyLines","length","error","dataWithEmail","map","record","email","from","insert","prevCards","obj","id","readAsText","children","type","accept","onChange","style","display","htmlFor","className"],"sources":["C:/INTERN/task1/vibe-web/src/FileUpload.js"],"sourcesContent":["import React from 'react';\r\nimport Papa from 'papaparse';\r\nimport supabase from './supabaseClient';\r\nimport Card from './Card';\r\n\r\nexport default function FileUpload({ setCards, user }) {\r\n    const handleFileUpload = async (event) => {\r\n        const file = event.target.files[0];\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = async (e) => {\r\n            console.log('File loaded successfully.');\r\n\r\n            const text = e.target.result;\r\n            console.log('File content:', text);\r\n\r\n            const { data, errors } = Papa.parse(text, {\r\n                header: true,\r\n                skipEmptyLines: true\r\n            });\r\n\r\n            console.log('Parsed data:', data);\r\n\r\n            if (errors.length > 0) {\r\n                console.error('CSV parsing error:', errors);\r\n                return;\r\n            }\r\n\r\n            console.log(user)\r\n            // Add the email field to each record\r\n            const dataWithEmail = data.map(record => ({\r\n                ...record,\r\n                email: user,\r\n            }));\r\n\r\n            console.log('Data with email:', dataWithEmail);\r\n\r\n            // Uploading to Supabase\r\n            const { error } = await supabase\r\n                .from('user_data')\r\n                .insert(dataWithEmail);\r\n\r\n            if (error) {\r\n                console.error('Error inserting data:', error);\r\n            } else {\r\n                // Update state with new cards if needed\r\n                console.log('Data inserted successfully:', dataWithEmail);\r\n                setCards(prevCards => [\r\n                    ...prevCards,\r\n                    ...dataWithEmail.map(obj => <Card key={obj.id} obj={obj} />)\r\n                ]);            \r\n            }\r\n        };\r\n\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <input\r\n                type=\"file\"\r\n                accept=\".csv\"\r\n                id=\"csvFileInput\"\r\n                onChange={handleFileUpload}\r\n                style={{ display: 'none' }}\r\n            />\r\n            <label htmlFor=\"csvFileInput\" className=\"labelStyle\"> Import CSV File </label>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,WAAW,CAC5B,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,IAAI,KAAM,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,cAAe,SAAS,CAAAC,UAAUA,CAAAC,IAAA,CAAqB,IAApB,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CAAAF,IAAA,CACjD,KAAM,CAAAG,gBAAgB,CAAG,KAAO,CAAAC,KAAK,EAAK,CACtC,KAAM,CAAAC,IAAI,CAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAClC,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAE/BD,MAAM,CAACE,MAAM,CAAG,KAAO,CAAAC,CAAC,EAAK,CACzBC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAExC,KAAM,CAAAC,IAAI,CAAGH,CAAC,CAACL,MAAM,CAACS,MAAM,CAC5BH,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEC,IAAI,CAAC,CAElC,KAAM,CAAEE,IAAI,CAAEC,MAAO,CAAC,CAAGzB,IAAI,CAAC0B,KAAK,CAACJ,IAAI,CAAE,CACtCK,MAAM,CAAE,IAAI,CACZC,cAAc,CAAE,IACpB,CAAC,CAAC,CAEFR,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEG,IAAI,CAAC,CAEjC,GAAIC,MAAM,CAACI,MAAM,CAAG,CAAC,CAAE,CACnBT,OAAO,CAACU,KAAK,CAAC,oBAAoB,CAAEL,MAAM,CAAC,CAC3C,OACJ,CAEAL,OAAO,CAACC,GAAG,CAACX,IAAI,CAAC,CACjB;AACA,KAAM,CAAAqB,aAAa,CAAGP,IAAI,CAACQ,GAAG,CAACC,MAAM,GAAK,CACtC,GAAGA,MAAM,CACTC,KAAK,CAAExB,IACX,CAAC,CAAC,CAAC,CAEHU,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEU,aAAa,CAAC,CAE9C;AACA,KAAM,CAAED,KAAM,CAAC,CAAG,KAAM,CAAA7B,QAAQ,CAC3BkC,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAACL,aAAa,CAAC,CAE1B,GAAID,KAAK,CAAE,CACPV,OAAO,CAACU,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CACjD,CAAC,IAAM,CACH;AACAV,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEU,aAAa,CAAC,CACzDtB,QAAQ,CAAC4B,SAAS,EAAI,CAClB,GAAGA,SAAS,CACZ,GAAGN,aAAa,CAACC,GAAG,CAACM,GAAG,eAAIlC,IAAA,CAACF,IAAI,EAAcoC,GAAG,CAAEA,GAAI,EAAjBA,GAAG,CAACC,EAAe,CAAC,CAAC,CAC/D,CAAC,CACN,CACJ,CAAC,CAEDvB,MAAM,CAACwB,UAAU,CAAC3B,IAAI,CAAC,CAC3B,CAAC,CAED,mBACIP,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UACIsC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbJ,EAAE,CAAC,cAAc,CACjBK,QAAQ,CAAEjC,gBAAiB,CAC3BkC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC9B,CAAC,cACF1C,IAAA,UAAO2C,OAAO,CAAC,cAAc,CAACC,SAAS,CAAC,YAAY,CAAAP,QAAA,CAAC,mBAAiB,CAAO,CAAC,EAC7E,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}