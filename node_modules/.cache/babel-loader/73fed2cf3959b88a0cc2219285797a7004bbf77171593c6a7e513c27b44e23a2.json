{"ast":null,"code":"var _jsxFileName = \"C:\\\\INTERN\\\\task1\\\\vibe-web\\\\src\\\\FileUpload.js\";\nimport React from 'react';\nimport Papa from 'papaparse';\nimport supabase from './supabaseClient';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FileUpload({\n  setCards,\n  user\n}) {\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n    reader.onload = async e => {\n      const text = e.target.result;\n      const {\n        data,\n        errors\n      } = Papa.parse(text, {\n        header: true,\n        // Treat first row as headers\n        skipEmptyLines: true // Skip empty lines\n      });\n      if (errors.length > 0) {\n        console.error('CSV parsing error:', errors);\n        return;\n      }\n\n      // Add the email field to each record\n      const dataWithEmail = data.map(record => ({\n        ...record,\n        email: user.email\n      }));\n      console.log('Data with email:', dataWithEmail);\n\n      // Uploading to Supabase\n      const {\n        error\n      } = await supabase.from('user_data').insert(dataWithEmail);\n      if (error) {\n        console.error('Error inserting data:', error);\n      } else {\n        async function fetchUserData() {\n          const {\n            data,\n            error\n          } = await supabase.from('user_data').select('*').eq('email', user.email);\n          if (error) {\n            console.error('Error fetching data:', error);\n          } else {\n            setCards(data.map(obj => /*#__PURE__*/_jsxDEV(Card, {\n              obj: obj\n            }, obj.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 50\n            }, this)));\n          }\n        }\n      }\n    };\n    reader.readAsText(file);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".csv\",\n      id: \"csvFileInput\",\n      onChange: handleFileUpload,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"csvFileInput\",\n      className: \"labelStyle\",\n      children: \"+\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_c = FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","Papa","supabase","Card","jsxDEV","_jsxDEV","FileUpload","setCards","user","handleFileUpload","event","file","target","files","reader","FileReader","onload","e","text","result","data","errors","parse","header","skipEmptyLines","length","console","error","dataWithEmail","map","record","email","log","from","insert","fetchUserData","select","eq","obj","id","fileName","_jsxFileName","lineNumber","columnNumber","readAsText","children","type","accept","onChange","style","display","htmlFor","className","_c","$RefreshReg$"],"sources":["C:/INTERN/task1/vibe-web/src/FileUpload.js"],"sourcesContent":["import React from 'react';\r\nimport Papa from 'papaparse';\r\nimport supabase from './supabaseClient';\r\nimport Card from './Card';\r\n\r\nexport default function FileUpload({ setCards, user }) {\r\n    const handleFileUpload = async (event) => {\r\n        const file = event.target.files[0];\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = async (e) => {\r\n            const text = e.target.result;\r\n            const { data, errors } = Papa.parse(text, {\r\n                header: true, // Treat first row as headers\r\n                skipEmptyLines: true // Skip empty lines\r\n            });\r\n\r\n            if (errors.length > 0) {\r\n                console.error('CSV parsing error:', errors);\r\n                return;\r\n            }\r\n\r\n            // Add the email field to each record\r\n            const dataWithEmail = data.map(record => ({\r\n                ...record,\r\n                email: user.email\r\n            }));\r\n            console.log('Data with email:', dataWithEmail);\r\n\r\n\r\n            // Uploading to Supabase\r\n            const { error } = await supabase\r\n                .from('user_data')\r\n                .insert(dataWithEmail);\r\n\r\n            if (error) {\r\n                console.error('Error inserting data:', error);\r\n            } else {\r\n                async function fetchUserData() {\r\n                    const { data, error } = await supabase\r\n                        .from('user_data')\r\n                        .select('*')\r\n                        .eq('email', user.email);\r\n        \r\n                    if (error) {\r\n                        console.error('Error fetching data:', error);\r\n                    } else {\r\n                        setCards(data.map(obj => <Card key={obj.id} obj={obj} />));\r\n                    }\r\n                }\r\n        \r\n            }\r\n        };\r\n\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <input\r\n                type=\"file\"\r\n                accept=\".csv\"\r\n                id=\"csvFileInput\"\r\n                onChange={handleFileUpload}\r\n                style={{ display: 'none' }}\r\n            />\r\n            <label htmlFor=\"csvFileInput\" className=\"labelStyle\">+</label>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}