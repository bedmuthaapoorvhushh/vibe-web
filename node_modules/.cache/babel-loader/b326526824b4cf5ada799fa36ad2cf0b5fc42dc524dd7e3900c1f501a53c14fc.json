{"ast":null,"code":"import React,{useState,useEffect}from'react';import supabase from'./supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){const[imageIndex,setImageIndex]=useState(0);const[hovered,setHovered]=useState(false);const additionalImages=props.obj.additional_images.replace(/^\\[|\\]$/g,'')// Remove the square brackets at the start and end\n.split(',').map(url=>url.trim().replace(/^\"|\"$/g,''));// Remove any extra spaces and quotes\nconst images=[props.obj.image,...additionalImages];const imageUrl=images[imageIndex].replace(/\"/g,'');const handleClick=()=>{window.open(props.obj.product_url,'_blank');};async function changeVisibility(){const newVisibility=!props.obj.visibility;const{data,error}=await supabase.from('user_data').update({visibility:newVisibility}).eq('id',props.obj.id);if(error){console.error('Error updating visibility:',error);}else{console.log(\"Visibility updated successfully:\",props.obj.visibility);props.setCards(prevCards=>prevCards.map(card=>card.props.obj.id===props.obj.id?{...card,props:{...card.props,obj:{...card.props.obj,visibility:newVisibility}}}:card));}}async function dltitem(){const{error}=await supabase.from('user_data').delete().eq('id',props.obj.id);if(error){console.error('Error deleting data:',error);}else{props.setCards(prevCards=>prevCards.filter(card=>card.props.obj.id!==props.obj.id));}}useEffect(()=>{let timer;if(hovered){timer=setInterval(()=>{setImageIndex(prevIndex=>(prevIndex+1)%images.length);},1000);// Change image every 1 second\n}return()=>clearInterval(timer);},[hovered,images.length]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onMouseEnter:()=>setHovered(true),onMouseLeave:()=>setHovered(false),children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\",className:\"card-photo\",onClick:handleClick}),props.obj.price_available&&/*#__PURE__*/_jsx(\"p\",{className:\"card-price\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"From \",props.obj.currency,\" \",props.obj.price]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"icon-container\",children:[/*#__PURE__*/_jsx(\"i\",{className:props.obj.visibility?\"fa fa-eye\":\"fa fa-eye-slash\",onClick:changeVisibility}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-edit\",onClick:()=>props.editCard(props.obj)}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\",onClick:dltitem})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title\",children:props.obj.product_title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-description\",children:props.obj.description})]});}","map":{"version":3,"names":["React","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","Card","props","imageIndex","setImageIndex","hovered","setHovered","additionalImages","obj","additional_images","replace","split","map","url","trim","images","image","imageUrl","handleClick","window","open","product_url","changeVisibility","newVisibility","visibility","data","error","from","update","eq","id","console","log","setCards","prevCards","card","dltitem","delete","filter","timer","setInterval","prevIndex","length","clearInterval","className","onMouseEnter","onMouseLeave","children","src","alt","onClick","price_available","currency","price","editCard","product_title","description"],"sources":["C:/INTERN/task1/vibe-web/src/Card.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport supabase from './supabaseClient';\r\n\r\nexport default function Card(props) {\r\n    const [imageIndex, setImageIndex] = useState(0);\r\n    const [hovered, setHovered] = useState(false);\r\n\r\n    const additionalImages = props.obj.additional_images\r\n        .replace(/^\\[|\\]$/g, '') // Remove the square brackets at the start and end\r\n        .split(',')\r\n        .map(url => url.trim().replace(/^\"|\"$/g, '')); // Remove any extra spaces and quotes\r\n\r\n    const images = [props.obj.image, ...additionalImages];\r\n    const imageUrl = images[imageIndex].replace(/\"/g, '');\r\n\r\n    const handleClick = () => {\r\n        window.open(props.obj.product_url, '_blank');\r\n    };\r\n\r\n    async function changeVisibility() {\r\n        const newVisibility = !props.obj.visibility;\r\n\r\n        const { data, error } = await supabase\r\n            .from('user_data')\r\n            .update({ visibility: newVisibility })\r\n            .eq('id', props.obj.id);\r\n\r\n        if (error) {\r\n            console.error('Error updating visibility:', error);\r\n        } else {\r\n            console.log(\"Visibility updated successfully:\", props.obj.visibility);\r\n            props.setCards(prevCards => \r\n                prevCards.map(card => \r\n                    card.props.obj.id === props.obj.id \r\n                    ? { ...card, props: { ...card.props, obj: { ...card.props.obj, visibility: newVisibility } } }\r\n                    : card\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    async function dltitem() {\r\n        const { error } = await supabase\r\n            .from('user_data')\r\n            .delete()\r\n            .eq('id', props.obj.id);\r\n\r\n        if (error) {\r\n            console.error('Error deleting data:', error);\r\n        } else {\r\n            props.setCards(prevCards => prevCards.filter(card => card.props.obj.id !== props.obj.id));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        if (hovered) {\r\n            timer = setInterval(() => {\r\n                setImageIndex(prevIndex => (prevIndex + 1) % images.length);\r\n            }, 1000); // Change image every 1 second\r\n        }\r\n        return () => clearInterval(timer);\r\n    }, [hovered, images.length]);\r\n\r\n    return (\r\n        <div \r\n            className=\"card\" \r\n            onMouseEnter={() => setHovered(true)} \r\n            onMouseLeave={() => setHovered(false)}\r\n        >\r\n            <img src={imageUrl} alt=\"\" className=\"card-photo\" onClick={handleClick} />\r\n            {props.obj.price_available && <p className='card-price'><b>From {props.obj.currency} {props.obj.price}</b></p>}\r\n            <div className=\"icon-container\">\r\n                <i \r\n                    className={props.obj.visibility ? \"fa fa-eye\" : \"fa fa-eye-slash\"}\r\n                    onClick={changeVisibility}\r\n                ></i>\r\n                <i className=\"fa fa-edit\" onClick={() => props.editCard(props.obj)}></i>\r\n                <i className=\"fa fa-trash\" onClick={dltitem}></i>\r\n            </div>\r\n            <p className='card-title'>{props.obj.product_title}</p>\r\n            <p className='card-description'>{props.obj.description}</p>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}